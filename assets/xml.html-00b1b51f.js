import{_ as n,o as s,c as a,a as t}from"./app-1c9dd427.js";const p="/php/php28.png",o={},e=t('<h1 id="ðŸ“”-php-example-ajax-and-xml" tabindex="-1"><a class="header-anchor" href="#ðŸ“”-php-example-ajax-and-xml" aria-hidden="true">#</a> ðŸ“” PHP Example - AJAX and XML</h1><h2 id="php-example-ajax-and-xml" tabindex="-1"><a class="header-anchor" href="#php-example-ajax-and-xml" aria-hidden="true">#</a> PHP Example - AJAX and XML</h2><p>AJAX XML fayli bilan interaktiv aloqa uchun ishlatilishi mumkin.</p><p>AJAX XML misoli</p><p>Quyidagi misol veb-sahifa qanday qilib AJAX yordamida XML faylidan ma&#39;lumot olishi mumkinligini ko&#39;rsatadi:</p><img src="'+p+`"><p>Misol tushuntirilgan - HTML sahifasi Agar foydalanuvchi yuqoridagi ochiladigan ro&#39;yxatda CD ni tanlasa, &quot;showCD()&quot; funksiyasi bajariladi. Funktsiya &quot;onchange&quot; hodisasi tomonidan ishga tushiriladi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function-definition function">showCD</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token operator">==</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML<span class="token operator">=</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token operator">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token operator">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> this<span class="token operator">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML<span class="token operator">=</span>this<span class="token operator">.</span>responseText<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  xmlhttp<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;GET&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;getcd.php?q=&quot;</span><span class="token operator">+</span>str<span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token operator">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
Select a <span class="token constant">CD</span><span class="token punctuation">:</span>
<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;cds&quot;</span> onchange<span class="token operator">=</span><span class="token string double-quoted-string">&quot;showCD(this.value)&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token operator">&gt;</span>Select a <span class="token constant">CD</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Bob Dylan&quot;</span><span class="token operator">&gt;</span>Bob Dylan<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Bee Gees&quot;</span><span class="token operator">&gt;</span>Bee Gees<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;Cat Stevens&quot;</span><span class="token operator">&gt;</span>Cat Stevens<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>b<span class="token operator">&gt;</span><span class="token constant">CD</span> info will be listed here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>showCD() funksiyasi quyidagilarni bajaradi:</p><ul><li>CD tanlangan yoki yo&#39;qligini tekshiring</li><li>XMLHttpRequest obyektini yarating</li><li>Server javobi tayyor bo&#39;lganda bajariladigan funksiyani yarating</li><li>So&#39;rovni serverdagi faylga yuboring</li><li>URL manziliga parametr (q) qo&#39;shilganiga e&#39;tibor bering (ochiladigan ro&#39;yxat mazmuni bilan)</li></ul><p>PHP fayli Yuqoridagi JavaScript tomonidan chaqirilgan serverdagi sahifa &quot;getcd.php&quot; deb nomlangan PHP faylidir.</p><p>PHP skripti &quot; cd_catalog.xml &quot; XML hujjatini yuklaydi , XML fayliga nisbatan soâ€˜rovni ishga tushiradi va natijani HTML sifatida qaytaradi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$q</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;q&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$xmlDoc</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$xmlDoc</span><span class="token operator">-&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;cd_catalog.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$x</span><span class="token operator">=</span><span class="token variable">$xmlDoc</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;ARTIST&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">&lt;=</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token property">length</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//Process only element nodes</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeType</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span> <span class="token operator">==</span> <span class="token variable">$q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token variable">$y</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">parentNode</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$cd</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$y</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token variable">$cd</span><span class="token operator">-&gt;</span><span class="token property">length</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//Process only element nodes</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$cd</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeType</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;&lt;b&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$cd</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeName</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;:&lt;/b&gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token variable">$cd</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CD so&#39;rovi JavaScript-dan PHP sahifasiga yuborilganda, quyidagilar sodir bo&#39;ladi:</p><ol><li>PHP XML DOM obyektini yaratadi</li><li>JavaScript-dan yuborilgan nomga mos keladigan barcha <code>&lt;artist&gt;</code> elementlarini toping</li><li>Albom ma&#39;lumotlarini chiqaring (&quot;txtHint&quot; to&#39;ldiruvchisiga yuboring)</li></ol>`,15),l=[e];function i(c,r){return s(),a("div",null,l)}const k=n(o,[["render",i],["__file","xml.html.vue"]]);export{k as default};
