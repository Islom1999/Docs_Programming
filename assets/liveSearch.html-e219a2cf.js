import{_ as n,o as s,c as a,a as t}from"./app-dcb21b78.js";const p={},o=t(`<h1 id="📔-php-ajax-live-search" tabindex="-1"><a class="header-anchor" href="#📔-php-ajax-live-search" aria-hidden="true">#</a> 📔 PHP - AJAX Live Search</h1><h2 id="php-ajax-live-search" tabindex="-1"><a class="header-anchor" href="#php-ajax-live-search" aria-hidden="true">#</a> PHP - AJAX Live Search</h2><p>AJAX foydalanuvchilarga qulayroq va interaktiv qidiruvlarni yaratish uchun ishlatilishi mumkin.</p><p>AJAX jonli qidiruv Quyidagi misol jonli qidiruvni ko&#39;rsatadi, u erda siz yozish paytida qidiruv natijalarini olasiz.</p><p>Jonli qidiruv an&#39;anaviy qidiruvga nisbatan juda ko&#39;p afzalliklarga ega:</p><p>Natijalar siz yozganingizda ko&#39;rsatiladi Yozishni davom ettirsangiz, natijalar torayadi Agar natijalar juda tor bo&#39;lsa, kengroq natijani ko&#39;rish uchun belgilarni olib tashlang</p><p>Misol tushuntirilgan - HTML sahifasi</p><p>Agar foydalanuvchi yuqoridagi kiritish maydoniga belgi yozsa, &quot;showResult()&quot; funksiyasi bajariladi. Funktsiya &quot;onkeyup&quot; hodisasi tomonidan ishga tushiriladi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function-definition function">showResult</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token operator">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;livesearch&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML<span class="token operator">=</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;livesearch&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>style<span class="token operator">.</span>border<span class="token operator">=</span><span class="token string double-quoted-string">&quot;0px&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token operator">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token operator">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> this<span class="token operator">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;livesearch&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML<span class="token operator">=</span>this<span class="token operator">.</span>responseText<span class="token punctuation">;</span>
      document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;livesearch&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>style<span class="token operator">.</span>border<span class="token operator">=</span><span class="token string double-quoted-string">&quot;1px solid #A5ACB2&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  xmlhttp<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;GET&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;livesearch.php?q=&quot;</span><span class="token operator">+</span>str<span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token operator">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;text&quot;</span> size<span class="token operator">=</span><span class="token string double-quoted-string">&quot;30&quot;</span> onkeyup<span class="token operator">=</span><span class="token string double-quoted-string">&quot;showResult(this.value)&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string double-quoted-string">&quot;livesearch&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Manba kodi tushuntirishi:</p><p>Agar kiritish maydoni bo&#39;sh bo&#39;lsa (str.length==0), funksiya jonli qidiruv to&#39;ldiruvchisi mazmunini tozalaydi va funksiyadan chiqadi.</p><p>Agar kiritish maydoni bo&#39;sh bo&#39;lmasa, showResult() funktsiyasi quyidagilarni bajaradi:</p><ul><li>XMLHttpRequest obyektini yarating</li><li>Server javobi tayyor bo&#39;lganda bajariladigan funksiyani yarating</li><li>So&#39;rovni serverdagi faylga yuboring</li><li>URL manziliga parametr (q) qo&#39;shilganiga e&#39;tibor bering (kirish maydonining mazmuni bilan)</li></ul><p>PHP fayli Yuqoridagi JavaScript tomonidan chaqirilgan serverdagi sahifa &quot;livesearch.php&quot; deb nomlangan PHP faylidir.</p><p>&quot;Livesearch.php&quot; dagi manba kodi XML faylida qidiruv satriga mos keladigan sarlavhalarni qidiradi va natijani qaytaradi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$xmlDoc</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DOMDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$xmlDoc</span><span class="token operator">-&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;links.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$x</span><span class="token operator">=</span><span class="token variable">$xmlDoc</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;link&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//get the q parameter from URL</span>
<span class="token variable">$q</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;q&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//lookup all links from the xml file if length of q&gt;0</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$q</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$hint</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token property">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$y</span><span class="token operator">=</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$z</span><span class="token operator">=</span><span class="token variable">$x</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$y</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeType</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//find a link matching the search text</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">stristr</span><span class="token punctuation">(</span><span class="token variable">$y</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span><span class="token punctuation">,</span><span class="token variable">$q</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$hint</span><span class="token operator">==</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token variable">$hint</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;&lt;a href=&#39;&quot;</span> <span class="token operator">.</span>
          <span class="token variable">$z</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span> <span class="token operator">.</span>
          <span class="token string double-quoted-string">&quot;&#39; target=&#39;_blank&#39;&gt;&quot;</span> <span class="token operator">.</span>
          <span class="token variable">$y</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/a&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token variable">$hint</span><span class="token operator">=</span><span class="token variable">$hint</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;br /&gt;&lt;a href=&#39;&quot;</span> <span class="token operator">.</span>
          <span class="token variable">$z</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span> <span class="token operator">.</span>
          <span class="token string double-quoted-string">&quot;&#39; target=&#39;_blank&#39;&gt;&quot;</span> <span class="token operator">.</span>
          <span class="token variable">$y</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">childNodes</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">nodeValue</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/a&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Set output to &quot;no suggestion&quot; if no hint was found</span>
<span class="token comment">// or to the correct values</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$hint</span><span class="token operator">==</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$response</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;no suggestion&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token variable">$response</span><span class="token operator">=</span><span class="token variable">$hint</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//output the response</span>
<span class="token keyword">echo</span> <span class="token variable">$response</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Agar JavaScript-dan yuborilgan matn bo&#39;lsa (strlen($q) &gt; 0), quyidagilar sodir bo&#39;ladi:</p><ul><li>XML faylni yangi XML DOM obyektiga yuklang</li><li>JavaScript-dan yuborilgan matndan mos keladiganlarni topish uchun barcha <code>&lt;title&gt; </code>elementlarini aylantiring</li><li>&quot;$response&quot; o&#39;zgaruvchisida to&#39;g&#39;ri url va sarlavhani o&#39;rnatadi. Agar bir nechta moslik topilsa, barcha mosliklar o&#39;zgaruvchiga qo&#39;shiladi</li><li>Hech qanday moslik topilmasa, $response oʻzgaruvchisi “taklif yoʻq” ga oʻrnatiladi.</li></ul>`,18),e=[o];function l(i,c){return s(),a("div",null,e)}const u=n(p,[["render",l],["__file","liveSearch.html.vue"]]);export{u as default};
