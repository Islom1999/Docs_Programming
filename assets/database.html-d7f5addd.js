import{_ as n,o as s,c as a,a as t}from"./app-dcb21b78.js";const p="/php/php27.png",o={},e=t('<h1 id="ðŸ“”-php-ajax-and-mysql" tabindex="-1"><a class="header-anchor" href="#ðŸ“”-php-ajax-and-mysql" aria-hidden="true">#</a> ðŸ“” PHP - AJAX and MySQL</h1><h2 id="php-ajax-and-mysql" tabindex="-1"><a class="header-anchor" href="#php-ajax-and-mysql" aria-hidden="true">#</a> PHP - AJAX and MySQL</h2><p>AJAX ma&#39;lumotlar bazasi bilan interaktiv aloqa uchun ishlatilishi mumkin.</p><p>AJAX ma&#39;lumotlar bazasi misoli</p><p>Quyidagi misol veb-sahifa qanday qilib AJAX yordamida ma&#39;lumotlar bazasidan ma&#39;lumot olishi mumkinligini ko&#39;rsatadi:</p><p><a href="https://www.w3schools.com/php/showphp.php?filename=demo_ajax_mysql">Misolni ko&#39;rish uchun bosing</a></p><p>Tushuntirilgan misol - MySQL ma&#39;lumotlar bazasi Yuqoridagi misolda biz foydalanadigan ma&#39;lumotlar bazasi jadvali quyidagicha ko&#39;rinadi:</p><img src="'+p+`"><p>Misol tushuntirildi Yuqoridagi misolda, foydalanuvchi yuqoridagi ochiladigan ro&#39;yxatda shaxsni tanlaganida, &quot;showUser()&quot; deb nomlangan funksiya bajariladi.</p><p>Funktsiya onchange hodisasi tomonidan ishga tushiriladi.</p><p>Mana HTML kodi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function-definition function">showUser</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlhttp<span class="token operator">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token operator">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> this<span class="token operator">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token operator">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span>innerHTML <span class="token operator">=</span> this<span class="token operator">.</span>responseText<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    xmlhttp<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;GET&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;getuser.php?q=&quot;</span><span class="token operator">+</span>str<span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlhttp<span class="token operator">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;users&quot;</span> onchange<span class="token operator">=</span><span class="token string double-quoted-string">&quot;showUser(this.value)&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token operator">&gt;</span>Select a person<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;1&quot;</span><span class="token operator">&gt;</span>Peter Griffin<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;2&quot;</span><span class="token operator">&gt;</span>Lois Griffin<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;3&quot;</span><span class="token operator">&gt;</span>Joseph Swanson<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;4&quot;</span><span class="token operator">&gt;</span>Glenn Quagmire<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string double-quoted-string">&quot;txtHint&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>b<span class="token operator">&gt;</span>Person info will be listed here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kod tushuntirish:</p><p>Birinchidan, odam tanlanganligini tekshiring. Hech kim tanlanmagan bo&#39;lsa (str == &quot;&quot;), txtHint tarkibini tozalang va funksiyadan chiqing. Agar biror kishi tanlangan bo&#39;lsa, quyidagilarni bajaring:</p><ul><li>XMLHttpRequest obyektini yarating</li><li>Server javobi tayyor bo&#39;lganda bajariladigan funksiyani yarating</li><li>So&#39;rovni serverdagi faylga yuboring</li><li>URL manziliga parametr (q) qo&#39;shilganiga e&#39;tibor bering (ochiladigan ro&#39;yxat mazmuni bilan)</li></ul><p>PHP fayli</p><p>Yuqoridagi JavaScript tomonidan chaqirilgan serverdagi sahifa &quot;getuser.php&quot; deb nomlangan PHP faylidir.</p><p>&quot;Getuser.php&quot; dagi manba kodi MySQL ma&#39;lumotlar bazasiga qarshi so&#39;rovni bajaradi va natijani HTML jadvaliga qaytaradi:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">table</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">table, td, th</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">th</span> <span class="token punctuation">{</span><span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$q</span> <span class="token operator">=</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;q&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$con</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;localhost&#39;</span><span class="token punctuation">,</span><span class="token string single-quoted-string">&#39;peter&#39;</span><span class="token punctuation">,</span><span class="token string single-quoted-string">&#39;abc123&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$con</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Could not connect: &#39;</span> <span class="token operator">.</span> <span class="token function">mysqli_error</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">mysqli_select_db</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;ajax_demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sql</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;SELECT * FROM user WHERE id = &#39;&quot;</span><span class="token operator">.</span><span class="token variable">$q</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&#39;&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;table&gt;
&lt;tr&gt;
&lt;th&gt;Firstname&lt;/th&gt;
&lt;th&gt;Lastname&lt;/th&gt;
&lt;th&gt;Age&lt;/th&gt;
&lt;th&gt;Hometown&lt;/th&gt;
&lt;th&gt;Job&lt;/th&gt;
&lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysqli_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;tr&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;td&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;FirstName&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;td&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;LastName&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;td&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;Age&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;td&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;Hometown&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;td&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;Job&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;/table&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Izoh: So&#39;rov JavaScript-dan PHP fayliga yuborilganda quyidagilar sodir bo&#39;ladi:</p><ol><li>PHP MySQL serveriga ulanishni ochadi</li><li>To&#39;g&#39;ri odam topildi</li><li>HTML jadvali yaratiladi, ma&#39;lumotlar bilan to&#39;ldiriladi va &quot;txtHint&quot; to&#39;ldiruvchisiga qaytariladi</li></ol>`,21),l=[e];function i(c,r){return s(),a("div",null,l)}const d=n(o,[["render",i],["__file","database.html.vue"]]);export{d as default};
